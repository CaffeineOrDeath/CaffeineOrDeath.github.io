<!doctype html>
<html lang="en">
  <head>
    <title>Food Import Cost Case Study // Case Studies and Problem Solving</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.120.4">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Jorden Williams" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.3c3c186cd62e563ad6e2f00a89dbee656ab912d1d46f856b5605dd0232521e2a.css" />

  </head>
  <body>
    <header class="app-header">
      <a href="https://wjorden.github.io"><img class="app-header-avatar" src="/3.jpg" alt="Jorden Williams" /></a>
      <span class="app-header-title">Jorden Williams</span>
      <p>Where data becomes a story.</p>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             <br> 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             <br> 
          
          <a class="app-header-menu-item" href="/about/">About</a>
             <br> 
          
          <a class="app-header-menu-item" href="/contact/">Contact</a>
      </nav>
      <br>
      <div class="app-header-social">
        
          <a href="https://github.com/wjorden" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://linkedin.com/in/wjorden" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
          <a href="mailto:jorden.williams.1989@gmail.com" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mail">
  <title>Email</title>
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Food Import Cost Case Study</h1>
      <div class="post-meta">
        <div>
          
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          
          
          
            Nov 12, 2023&emsp; <strong>Last Updated:</strong> &nbsp; Dec 11, 2023
          
        </div>
        <div>
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://wjorden.github.io/tags/r/">R</a>
              <a class="tag" href="https://wjorden.github.io/tags/ggplot/">ggplot</a>
              <a class="tag" href="https://wjorden.github.io/tags/python/">python</a>
              <a class="tag" href="https://wjorden.github.io/tags/statistics/">statistics</a>
              <a class="tag" href="https://wjorden.github.io/tags/plotnine/">plotnine</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-binding/plotly.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/typedarray/typedarray.min.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/jquery/jquery.min.js"></script>
<link href="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-main/plotly-latest.min.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-binding/plotly.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/typedarray/typedarray.min.js"></script>
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/jquery/jquery.min.js"></script>
<link href="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/plotly-main/plotly-latest.min.js"></script>
<p>This topic was chosen as there is a lot that goes into the production of food. A level of concern was raised as it became obvious that people with various disorders are struggling to get the food items they can have. By this it is meant, those with Crohn’s disease, restrictive diets due to genetics (dysautonomia, EDS, ANS, etc), as well as many others. Medications can make the lack of proper foods tolerable, but it does not solve the overall issue they have.</p>
<h1 id="week-1">Week 1</h1>
<h2 id="setup">Setup</h2>
<p>The libraries in use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(plotly)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(readxl)
</span></span></code></pre></div><h2 id="planning-stage">Planning Stage</h2>
<ol>
<li>Find the data set(s) for food production costs (first place to look is USDA)</li>
<li>Find the data set(s) for consumer cost of the items (USDA?)</li>
<li>Start plotting the costs against each other (Smooth vs Bar charts)</li>
<li>Figure out the pattern in the data (likely going to have go back over the course of a few years (on returning, apparently decades))</li>
</ol>
<p>The main question, why does food cost so much? To answer this question, we need a few bits of data to start with. Those data sets are, the current cost to produce (e.g. grow fruits) and/or manufacture (e.g. process grains) the food items. From there, we need to get a data set for the cost to consumers of these same items. Considering that I live in the United States, I’ll be working with those data sets first.</p>
<h2 id="lets-begin">Let’s begin</h2>
<p>Time to start gathering the data sets. Charts will appear in the order made in the order of the data sets. If more data sets are listed than there are charts, then the initial exploration of the data is not done.</p>
<p>Well, we have two charts made showing the breakdown of imported goods and the year-over-year change in cost. The spikes in import price or the amount of food still needed to be imported raises some concern. Further review will be needed to provide, not only context, but an explanation as to why we saw such a sharp increase.</p>
<h1 id="end-of-week-1-update">End of Week 1 Update</h1>
<p>The data is immense. As of right now, the data still requires some restructuring for it to be more accessible for visualization. The Vegetables and Pulses Yearbook, while extensive (50+ tables), is structured for spreadsheet use. Have a happy holiday!</p>
<h1 id="week-2">Week 2</h1>
<p>The line chart is the average of imported vegetables and pulses available by US pounds per person. It was made using ggplot2 and a custom data frame.</p>
<h1 id="end-of-week-2">End of Week 2</h1>
<p>Upon further review, there are a lot of missing pieces. Namely, trade agreements. While we have import costs, this would be offset by trades with respective countries. For example, exporting wheat to import avocados.</p>
<h1 id="data-sets">Data sets</h1>
<p><a href="https://www.ers.usda.gov/data-products/u-s-food-imports/">Food Imports</a><br>
<a href="https://www.ers.usda.gov/data-products/vegetables-and-pulses-data/vegetables-and-pulses-yearbook-tables/">Vegetables and Pulses Yearbook</a><br>
<a href="https://www.ers.usda.gov/data-products/agricultural-productivity-in-the-u-s/">Farm Output</a><br>
<a href="https://www.ers.usda.gov/data-products/dairy-data.aspx">Dairy</a></p>
<h1 id="charts">Charts</h1>
<p><img src="img/2022-US-Imports.png" alt="2022 US Imports (Spreadsheet)"><br>
This is the breakdown of all the imported food and preparatory items, by category.</p>
<p><img src="img/US-Imported-Food-Price-Change.png" alt="US Imported Food YoY (Spreadsheet)"><br>
This chart is rather misleading when first looking at it. While the data used to prepare this chart is accurate, it does not take into account trade agreements. There is a possibility that that the true change is much flatter. The data does not make a distinction towards either true expense or expense minus trades.</p>
<p>Now, for some R plots. Sheet 3 is “U.S. per capita availability of selected, commercially produced, fresh and processing vegetables and dry pulse crops”.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pc <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read_xlsx</span>(<span style="color:#e6db74">&#34;datasets/VPPT.xlsx&#34;</span>, sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>avg <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">setNames</span>(<span style="color:#a6e22e">aggregate</span>(pc<span style="color:#f92672">$</span>Value, <span style="color:#a6e22e">list</span>(pc<span style="color:#f92672">$</span>Year), FUN<span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">mean</span>(x), <span style="color:#ae81ff">2</span>)), <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;year&#34;</span>, <span style="color:#e6db74">&#34;value&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(avg, <span style="color:#a6e22e">aes</span>(year, value)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Average Vegetables and Pulses Per Person&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ylab</span>(<span style="color:#e6db74">&#34;Weight per Person (lbs)&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">xlab</span>(<span style="color:#e6db74">&#34;Year&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplotly</span>(p)
</span></span></code></pre></div><div class="plotly html-widget html-fill-item" id="htmlwidget-1" style="width:500px;height:400px;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[9.0399999999999991,9.1899999999999995,9.1500000000000004,9.0600000000000005,8.9199999999999999,8.9100000000000001,9.1999999999999993,9.1699999999999999,8.9199999999999999,9.1099999999999994,7.5099999999999998,7.3700000000000001,7.4199999999999999,7.4400000000000004,7.8600000000000003,7.8200000000000003,7.7999999999999998,7.9100000000000001,7.9699999999999998,8.2699999999999996,8.2699999999999996,8.4100000000000001,8.3300000000000001,8.5800000000000001,8.6699999999999999,8.5700000000000003,8.7400000000000002,8.3699999999999992,8.3100000000000005,8.4000000000000004,8.3800000000000008,8.1500000000000004,8.1899999999999995,8.3100000000000005,8.3800000000000008,8.2799999999999994,8.0500000000000007,8.0999999999999996,7.8600000000000003,7.8899999999999997,7.9699999999999998,7.6600000000000001,7.8300000000000001,7.6100000000000003,7.7300000000000004,7.5599999999999996,7.9199999999999999,7.9900000000000002,8.0800000000000001,7.7300000000000004,8.9900000000000002,8.7100000000000009,8.75],"text":["year: 1970<br />value: 9.04","year: 1971<br />value: 9.19","year: 1972<br />value: 9.15","year: 1973<br />value: 9.06","year: 1974<br />value: 8.92","year: 1975<br />value: 8.91","year: 1976<br />value: 9.20","year: 1977<br />value: 9.17","year: 1978<br />value: 8.92","year: 1979<br />value: 9.11","year: 1980<br />value: 7.51","year: 1981<br />value: 7.37","year: 1982<br />value: 7.42","year: 1983<br />value: 7.44","year: 1984<br />value: 7.86","year: 1985<br />value: 7.82","year: 1986<br />value: 7.80","year: 1987<br />value: 7.91","year: 1988<br />value: 7.97","year: 1989<br />value: 8.27","year: 1990<br />value: 8.27","year: 1991<br />value: 8.41","year: 1992<br />value: 8.33","year: 1993<br />value: 8.58","year: 1994<br />value: 8.67","year: 1995<br />value: 8.57","year: 1996<br />value: 8.74","year: 1997<br />value: 8.37","year: 1998<br />value: 8.31","year: 1999<br />value: 8.40","year: 2000<br />value: 8.38","year: 2001<br />value: 8.15","year: 2002<br />value: 8.19","year: 2003<br />value: 8.31","year: 2004<br />value: 8.38","year: 2005<br />value: 8.28","year: 2006<br />value: 8.05","year: 2007<br />value: 8.10","year: 2008<br />value: 7.86","year: 2009<br />value: 7.89","year: 2010<br />value: 7.97","year: 2011<br />value: 7.66","year: 2012<br />value: 7.83","year: 2013<br />value: 7.61","year: 2014<br />value: 7.73","year: 2015<br />value: 7.56","year: 2016<br />value: 7.92","year: 2017<br />value: 7.99","year: 2018<br />value: 8.08","year: 2019<br />value: 7.73","year: 2020<br />value: 8.99","year: 2021<br />value: 8.71","year: 2022<br />value: 8.75"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Average Vegetables and Pulses Per Person","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1967.4000000000001,2024.5999999999999],"tickmode":"array","ticktext":["1970","1980","1990","2000","2010","2020"],"tickvals":[1970,1980,1990,2000,2010,2020],"categoryorder":"array","categoryarray":["1970","1980","1990","2000","2010","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7.2785000000000002,9.2914999999999992],"tickmode":"array","ticktext":["7.5","8.0","8.5","9.0"],"tickvals":[7.5,8,8.5,9],"categoryorder":"array","categoryarray":["7.5","8.0","8.5","9.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Weight per Person (lbs)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"38c47f28283f":{"x":{},"y":{},"type":"scatter"}},"cur_data":"38c47f28283f","visdat":{"38c47f28283f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Keep in mind, this is for the <strong>WHOLE YEAR</strong>.</p>
<p>For a month-to-month basis, we would need to divide the value by 12.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>avg_monthly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">setNames</span>(<span style="color:#a6e22e">aggregate</span>(pc<span style="color:#f92672">$</span>Value, <span style="color:#a6e22e">list</span>(pc<span style="color:#f92672">$</span>Year), FUN<span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">mean</span>(x)<span style="color:#f92672">/</span><span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">2</span>)), <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;year&#34;</span>, <span style="color:#e6db74">&#34;value&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(avg_monthly, <span style="color:#a6e22e">aes</span>(year, value)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_line</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Average Vegetables and Pulses Per Person Per Month&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ylab</span>(<span style="color:#e6db74">&#34;Weight per Person (lbs)&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">xlab</span>(<span style="color:#e6db74">&#34;Year&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplotly</span>(p2)
</span></span></code></pre></div><div class="plotly html-widget html-fill-item" id="htmlwidget-2" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[0.75,0.77000000000000002,0.76000000000000001,0.75,0.73999999999999999,0.73999999999999999,0.77000000000000002,0.76000000000000001,0.73999999999999999,0.76000000000000001,0.63,0.60999999999999999,0.62,0.62,0.65000000000000002,0.65000000000000002,0.65000000000000002,0.66000000000000003,0.66000000000000003,0.68999999999999995,0.68999999999999995,0.69999999999999996,0.68999999999999995,0.71999999999999997,0.71999999999999997,0.70999999999999996,0.72999999999999998,0.69999999999999996,0.68999999999999995,0.69999999999999996,0.69999999999999996,0.68000000000000005,0.68000000000000005,0.68999999999999995,0.69999999999999996,0.68999999999999995,0.67000000000000004,0.67000000000000004,0.66000000000000003,0.66000000000000003,0.66000000000000003,0.64000000000000001,0.65000000000000002,0.63,0.64000000000000001,0.63,0.66000000000000003,0.67000000000000004,0.67000000000000004,0.64000000000000001,0.75,0.72999999999999998,0.72999999999999998],"text":["year: 1970<br />value: 0.75","year: 1971<br />value: 0.77","year: 1972<br />value: 0.76","year: 1973<br />value: 0.75","year: 1974<br />value: 0.74","year: 1975<br />value: 0.74","year: 1976<br />value: 0.77","year: 1977<br />value: 0.76","year: 1978<br />value: 0.74","year: 1979<br />value: 0.76","year: 1980<br />value: 0.63","year: 1981<br />value: 0.61","year: 1982<br />value: 0.62","year: 1983<br />value: 0.62","year: 1984<br />value: 0.65","year: 1985<br />value: 0.65","year: 1986<br />value: 0.65","year: 1987<br />value: 0.66","year: 1988<br />value: 0.66","year: 1989<br />value: 0.69","year: 1990<br />value: 0.69","year: 1991<br />value: 0.70","year: 1992<br />value: 0.69","year: 1993<br />value: 0.72","year: 1994<br />value: 0.72","year: 1995<br />value: 0.71","year: 1996<br />value: 0.73","year: 1997<br />value: 0.70","year: 1998<br />value: 0.69","year: 1999<br />value: 0.70","year: 2000<br />value: 0.70","year: 2001<br />value: 0.68","year: 2002<br />value: 0.68","year: 2003<br />value: 0.69","year: 2004<br />value: 0.70","year: 2005<br />value: 0.69","year: 2006<br />value: 0.67","year: 2007<br />value: 0.67","year: 2008<br />value: 0.66","year: 2009<br />value: 0.66","year: 2010<br />value: 0.66","year: 2011<br />value: 0.64","year: 2012<br />value: 0.65","year: 2013<br />value: 0.63","year: 2014<br />value: 0.64","year: 2015<br />value: 0.63","year: 2016<br />value: 0.66","year: 2017<br />value: 0.67","year: 2018<br />value: 0.67","year: 2019<br />value: 0.64","year: 2020<br />value: 0.75","year: 2021<br />value: 0.73","year: 2022<br />value: 0.73"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Average Vegetables and Pulses Per Person Per Month","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1967.4000000000001,2024.5999999999999],"tickmode":"array","ticktext":["1970","1980","1990","2000","2010","2020"],"tickvals":[1970,1980,1990,2000,2010,2020],"categoryorder":"array","categoryarray":["1970","1980","1990","2000","2010","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.60199999999999998,0.77800000000000002],"tickmode":"array","ticktext":["0.65","0.70","0.75"],"tickvals":[0.65000000000000013,0.70000000000000007,0.75000000000000011],"categoryorder":"array","categoryarray":["0.65","0.70","0.75"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Weight per Person (lbs)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"38c4609e2f5b":{"x":{},"y":{},"type":"scatter"}},"cur_data":"38c4609e2f5b","visdat":{"38c4609e2f5b":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Now for some python fun. Let’s begin by loading R’s python package.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># if it is not already installed, run the following command</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#39;reticulate&#39;, repos=&#34;http://cran.us.r-project.org&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(reticulate)
</span></span></code></pre></div><p>Load python’s respective packages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># if they are not installed, run the following command</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># pip install pandas plotnine</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#75715e"># import ggplot</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> plotnine <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> textwrap
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">wrap</span>(string, max_width):
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>join(textwrap<span style="color:#f92672">.</span>wrap(string, max_width))
</span></span></code></pre></div><p>Now, we’re going to load up a CSV containing the cost of vegetables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;datasets/veggies-2020.csv&#39;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>info()
</span></span></code></pre></div><pre><code>## &lt;class 'pandas.core.frame.DataFrame'&gt;
## RangeIndex: 93 entries, 0 to 92
## Data columns (total 8 columns):
##  #   Column              Non-Null Count  Dtype  
## ---  ------              --------------  -----  
##  0   Vegetable           93 non-null     object 
##  1   Form                93 non-null     object 
##  2   RetailPrice         93 non-null     float64
##  3   RetailPriceUnit     93 non-null     object 
##  4   Yield               93 non-null     float64
##  5   CupEquivalentSize   93 non-null     float64
##  6   CupEquivalentUnit   93 non-null     object 
##  7   CupEquivalentPrice  93 non-null     float64
## dtypes: float64(4), object(4)
## memory usage: 5.9+ KB
</code></pre>
<p>Now we have different forms of vegetables, retail price, and so much more. The key columns are going to be the name, Form, RetailPrice, and Yield. Why yield? Well, depending on how you use them, you may lose a good amount of of what you purchased. Something not usually considered when buying vegetables.</p>
<p>Lets make a bar chart with the RetailPrice data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># sort values for a cleaner appearance</span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;Vegetable&#39;</span>]
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;RetailPrice&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># currently the vegetable names are overlapping. I&#39;m still trying to figure out</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># how to best handle this. textwrap causes &#39;aes is not defined&#39;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># cannot set guide using n.dodge, </span>
</span></span><span style="display:flex;"><span>(ggplot(df, aes(<span style="color:#e6db74">&#39;reorder(x, y)&#39;</span>, y, fill<span style="color:#f92672">=</span>df[<span style="color:#e6db74">&#39;Form&#39;</span>])) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  geom_col(position<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;identity&#39;</span>) <span style="color:#f92672">+</span> scale_fill_manual([<span style="color:#e6db74">&#39;red&#39;</span>, <span style="color:#e6db74">&#39;blue&#39;</span>, <span style="color:#e6db74">&#39;green&#39;</span>, <span style="color:#e6db74">&#39;orange&#39;</span>]) <span style="color:#f92672">+</span> coord_flip() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  labs(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Vegetable&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Retail Price in USD&#39;</span>) <span style="color:#f92672">+</span> theme(axis_text_y<span style="color:#f92672">=</span>element_text(size<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)))
</span></span></code></pre></div><img src="https://wjorden.github.io/posts/capstones/google/google-data-analytics/index_files/figure-html/unnamed-chunk-7-1.png" width="614" />
<h2 id="additional-questions-collected-while-working">Additional Questions Collected While Working</h2>
<ol>
<li>Why did 2008 and 2013 have the largest percentage change?</li>
<li>In the line chart, we see a steep drop at 1980, what happened?</li>
<li>In the line chart, we see a spike at 2020, what happened?</li>
</ol>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
